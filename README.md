# lxhadoop
录信的定制版hadoop

鉴于hadoop在随机读写性能的低下,我们改了下hadoop在随机读写上的实现,旨在提升lucene在hadoop上的性能.<br>
1.lucene是一个倒排索引,在更新,检索,统计三个方面需要大量的使用随机读,通过hadoop的这个改动,可以大幅度的提升需要随机读的lucene的性能.<br>
2.目前测试通过这种改动可以将随机读写性能提升100~300倍-走网络与不走网络均可提升,如果基础网络不好,延迟较大则提升的倍数会更多.<br>
3.由于时间的关系,实现的比较粗糙,还依然有大量的提升空间可以改进,欢迎各位大神给与批评指正. 除了完善外,未来可以考虑引入mmap.<br>
4.测试程序参见BatchRead.java .<br>
5.以下为我在jdk15 SSD环境上的测试结果.<br>

export HADOOP_OPTS="-Xmx6000m -XX:+UseZGC" <br>
./hadoop jar ./bb.jar cn.lucene.test.BatchRead    /allssd/a.doc <br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:12@原始hdfs时间:2396 <br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:13@原始hdfs时间:2443<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:14@原始hdfs时间:2415<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:15@原始hdfs时间:2488<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:26@原始hdfs时间:2491<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:14@原始hdfs时间:2401<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:12@原始hdfs时间:2520<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:14@原始hdfs时间:2411<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:15@原始hdfs时间:2652<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:21@原始hdfs时间:2625<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:16@原始hdfs时间:2630<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:15@原始hdfs时间:2499<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:18@原始hdfs时间:2473<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:14@原始hdfs时间:2479<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:13@原始hdfs时间:2536<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:16@原始hdfs时间:2627<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:16@原始hdfs时间:2445<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:13@原始hdfs时间:2480<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:12@原始hdfs时间:2494<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:13@原始hdfs时间:2468<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:15@原始hdfs时间:2459<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:14@原始hdfs时间:2387<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:12@原始hdfs时间:2474<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:16@原始hdfs时间:2476<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:13@原始hdfs时间:2473<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:15@原始hdfs时间:2648<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:17@原始hdfs时间:2672<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:19@原始hdfs时间:2607<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:22@原始hdfs时间:2618<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:19@原始hdfs时间:2573<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:16@原始hdfs时间:2580<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:17@原始hdfs时间:2514<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:16@原始hdfs时间:2532<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:17@原始hdfs时间:2596<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:16@原始hdfs时间:2469<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:13@原始hdfs时间:2397<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:13@原始hdfs时间:2488<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:11@原始hdfs时间:2476<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:12@原始hdfs时间:2489<br>
cmpdiff:比对结果:true@校验成功次数:10000@读取次数:10000@优化后时间:17@原始hdfs时间:2456<br>
